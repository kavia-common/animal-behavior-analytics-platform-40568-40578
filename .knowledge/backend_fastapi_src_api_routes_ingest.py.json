{"is_source_file": true, "format": "Python", "description": "This file defines an API route for ingesting behavior event data via HTTP POST requests. It uses FastAPI to create an endpoint that receives event data, validates it, and adds it to an in-memory store, while broadcasting updates via WebSocket and computing a session summary.", "external_files": ["src.api.models", "src.api.sockets"], "external_methods": ["broadcast_event", "broadcast_analytics_delta", "compute_summary"], "published": ["ingest_event"], "classes": [{"name": "IngestEvent", "description": "Pydantic model representing the structure of incoming behavior event data, including identifiers, timestamps, confidence score, and metadata."}], "methods": [{"name": "ingest_event(payload: IngestEvent)", "description": "API endpoint handler for ingesting a behavior event, which checks for duplicate IDs, appends the event to an in-memory list, and broadcasts updates.", "scope": "", "scopeKind": ""}], "calls": ["any", "BehaviorEvent(**payload.model_dump())", "broadcast_event(event)", "compute_summary([event.session_id], heatmap_scaling=\"session\")", "broadcast_analytics_delta(summary)"], "search-terms": ["FastAPI", "ingest_event", "BehaviorEvent", "APIRouter", "POST /event", "IngestEvent", "event ingestion", "broadcast_event", "compute_summary"], "state": 2, "file_id": 23, "knowledge_revision": 65, "git_revision": "f8eb0c46f21f9b549b2193e5b9ca104f87aaa00c", "ctags": [{"_type": "tag", "name": "IngestEvent", "path": "/home/kavia/workspace/code-generation/updated--animal-behavior-analytics-platform-animal-behavior-analytics-platform-40568-40578-40605/backend_fastapi/src/api/routes/ingest.py", "pattern": "/^class IngestEvent(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "confidence", "path": "/home/kavia/workspace/code-generation/updated--animal-behavior-analytics-platform-animal-behavior-analytics-platform-40568-40578-40605/backend_fastapi/src/api/routes/ingest.py", "pattern": "/^    confidence: float = Field(ge=0.0, le=1.0)$/", "language": "Python", "typeref": "typename:float", "kind": "variable", "scope": "IngestEvent", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/updated--animal-behavior-analytics-platform-animal-behavior-analytics-platform-40568-40578-40605/backend_fastapi/src/api/routes/ingest.py", "pattern": "/^    id: str = Field(..., description=\"Event id.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "IngestEvent", "scopeKind": "class"}, {"_type": "tag", "name": "ingest_event", "path": "/home/kavia/workspace/code-generation/updated--animal-behavior-analytics-platform-animal-behavior-analytics-platform-40568-40578-40605/backend_fastapi/src/api/routes/ingest.py", "pattern": "/^def ingest_event(payload: IngestEvent):$/", "language": "Python", "kind": "function", "signature": "(payload: IngestEvent)"}, {"_type": "tag", "name": "metadata", "path": "/home/kavia/workspace/code-generation/updated--animal-behavior-analytics-platform-animal-behavior-analytics-platform-40568-40578-40605/backend_fastapi/src/api/routes/ingest.py", "pattern": "/^    metadata: Dict[str, Any] = Field(default_factory=dict)$/", "language": "Python", "typeref": "typename:Dict[str, Any]", "kind": "variable", "scope": "IngestEvent", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/updated--animal-behavior-analytics-platform-animal-behavior-analytics-platform-40568-40578-40605/backend_fastapi/src/api/routes/ingest.py", "pattern": "/^router = APIRouter(prefix=\"\\/ingest\", tags=[\"Ingest\"])$/", "language": "Python", "kind": "variable"}], "hash": "ba14ff803abe9066d30f32e668a1b780", "format-version": 4, "code-base-name": "frontend_react_js", "filename": "backend_fastapi/src/api/routes/ingest.py", "fields": [{"name": "float confidence", "scope": "IngestEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "IngestEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "Dict[str, Any] metadata", "scope": "IngestEvent", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/ingest\", tags=[\"Ingest\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"65": "f8eb0c46f21f9b549b2193e5b9ca104f87aaa00c"}]}